2020-08-15 15:57:50,199 INFO  - MaterializeWorkflowDescriptorActor [UUID(7ffd6c3a)]: Parsing workflow as WDL draft-2
2020-08-15 15:57:52,614 INFO  - MaterializeWorkflowDescriptorActor [UUID(7ffd6c3a)]: Call-to-Backend assignments: panoply_mo_nmf_workflow.panoply_ssgsea_report -> Local, panoply_mo_nmf_workflow.panoply_mo_nmf -> Local, panoply_mo_nmf_workflow.panoply_ssgsea -> Local
2020-08-15 15:57:52,735 WARN  - Local [UUID(7ffd6c3a)]: Key/s [memory, disks, cpu] is/are not supported by backend. Unsupported attributes will not be part of job executions.
2020-08-15 15:57:52,743 WARN  - Local [UUID(7ffd6c3a)]: Key/s [preemptible, disks, cpu, memory] is/are not supported by backend. Unsupported attributes will not be part of job executions.
2020-08-15 15:57:52,744 WARN  - Local [UUID(7ffd6c3a)]: Key/s [preemptible, disks, cpu, memory] is/are not supported by backend. Unsupported attributes will not be part of job executions.
2020-08-15 15:57:55,295 INFO  - WorkflowExecutionActor-7ffd6c3a-2c3c-4642-b2c4-eeee47c0a80d [UUID(7ffd6c3a)]: Starting panoply_mo_nmf_workflow.panoply_mo_nmf
2020-08-15 15:57:56,393 WARN  - BackgroundConfigAsyncJobExecutionActor [UUID(7ffd6c3a)panoply_mo_nmf_workflow.panoply_mo_nmf:NA:1]: Unrecognized runtime attribute keys: preemptible, disks, cpu, memory
2020-08-15 15:57:57,264 INFO  - BackgroundConfigAsyncJobExecutionActor [UUID(7ffd6c3a)panoply_mo_nmf_workflow.panoply_mo_nmf:NA:1]: `set -euo pipefail
#Command goes here
Rscript /home/pgdac/src/mo-nmf.r -t /cromwell-executions/panoply_mo_nmf_workflow/7ffd6c3a-2c3c-4642-b2c4-eeee47c0a80d/call-panoply_mo_nmf/inputs/1861426665/pdac-v0.2-ratio-pstygc.tar -y /cromwell-executions/panoply_mo_nmf_workflow/7ffd6c3a-2c3c-4642-b2c4-eeee47c0a80d/call-panoply_mo_nmf/inputs/1861426665/pdac-v0.2-param.yaml -l NA -m NA -n NA -s NA -r false -f NA -u NA -i NA -a NA -e NA -z /home/pgdac/src/

find * -type d -name "[0-9]*" -print0 | tar -czvf results_nmf.tar --null -T -

find . -name "matrix_W_combined_signed.gct" | xargs cp -t .`
2020-08-15 15:57:57,363 INFO  - BackgroundConfigAsyncJobExecutionActor [UUID(7ffd6c3a)panoply_mo_nmf_workflow.panoply_mo_nmf:NA:1]: executing: # make sure there is no preexisting Docker CID file
rm -f /media/sf_Dropbox/Devel/PANOPLY/hydrant/tasks/panoply_mo_nmf/cromwell-executions/panoply_mo_nmf_workflow/7ffd6c3a-2c3c-4642-b2c4-eeee47c0a80d/call-panoply_mo_nmf/execution/docker_cid
# run as in the original configuration without --rm flag (will remove later)
docker run \
  --cidfile /media/sf_Dropbox/Devel/PANOPLY/hydrant/tasks/panoply_mo_nmf/cromwell-executions/panoply_mo_nmf_workflow/7ffd6c3a-2c3c-4642-b2c4-eeee47c0a80d/call-panoply_mo_nmf/execution/docker_cid \
  -i \
   \
  --entrypoint /bin/bash \
  -v /media/sf_Dropbox/Devel/PANOPLY/hydrant/tasks/panoply_mo_nmf/cromwell-executions/panoply_mo_nmf_workflow/7ffd6c3a-2c3c-4642-b2c4-eeee47c0a80d/call-panoply_mo_nmf:/cromwell-executions/panoply_mo_nmf_workflow/7ffd6c3a-2c3c-4642-b2c4-eeee47c0a80d/call-panoply_mo_nmf \
  broadcptacdev/panoply_mo_nmf@sha256:10041cab7dd4535fec03adec3881505cb22fa29717d10e22b6c83c10bf6015eb /cromwell-executions/panoply_mo_nmf_workflow/7ffd6c3a-2c3c-4642-b2c4-eeee47c0a80d/call-panoply_mo_nmf/execution/script

# get the return code (working even if the container was detached)
rc=$(docker wait `cat /media/sf_Dropbox/Devel/PANOPLY/hydrant/tasks/panoply_mo_nmf/cromwell-executions/panoply_mo_nmf_workflow/7ffd6c3a-2c3c-4642-b2c4-eeee47c0a80d/call-panoply_mo_nmf/execution/docker_cid`)

# remove the container after waiting
docker rm `cat /media/sf_Dropbox/Devel/PANOPLY/hydrant/tasks/panoply_mo_nmf/cromwell-executions/panoply_mo_nmf_workflow/7ffd6c3a-2c3c-4642-b2c4-eeee47c0a80d/call-panoply_mo_nmf/execution/docker_cid`

# return exit code
exit $rc
2020-08-15 15:57:59,137 INFO  - BackgroundConfigAsyncJobExecutionActor [UUID(7ffd6c3a)panoply_mo_nmf_workflow.panoply_mo_nmf:NA:1]: job id: 16825
2020-08-15 15:57:59,154 INFO  - BackgroundConfigAsyncJobExecutionActor [UUID(7ffd6c3a)panoply_mo_nmf_workflow.panoply_mo_nmf:NA:1]: Status change from - to WaitingForReturnCodeFile
2020-08-15 16:11:45,200 INFO  - BackgroundConfigAsyncJobExecutionActor [UUID(7ffd6c3a)panoply_mo_nmf_workflow.panoply_mo_nmf:NA:1]: Status change from WaitingForReturnCodeFile to Done
2020-08-15 16:11:46,893 INFO  - WorkflowExecutionActor-7ffd6c3a-2c3c-4642-b2c4-eeee47c0a80d [UUID(7ffd6c3a)]: Starting panoply_mo_nmf_workflow.panoply_ssgsea
2020-08-15 16:11:47,527 WARN  - BackgroundConfigAsyncJobExecutionActor [UUID(7ffd6c3a)panoply_mo_nmf_workflow.panoply_ssgsea:NA:1]: Unrecognized runtime attribute keys: preemptible, disks, cpu, memory
2020-08-15 16:11:47,659 INFO  - BackgroundConfigAsyncJobExecutionActor [UUID(7ffd6c3a)panoply_mo_nmf_workflow.panoply_ssgsea:NA:1]: `set -euo pipefail

# prepare GCT file
/home/pgdac/src/preprocessGCT.R -i /cromwell-executions/panoply_mo_nmf_workflow/7ffd6c3a-2c3c-4642-b2c4-eeee47c0a80d/call-panoply_ssgsea/inputs/1646958054/matrix_W_combined_signed.gct -y /cromwell-executions/panoply_mo_nmf_workflow/7ffd6c3a-2c3c-4642-b2c4-eeee47c0a80d/call-panoply_ssgsea/inputs/1861426665/pdac-v0.2-param.yaml -l NA -t NA -o NA -a NA -s NA --gene_symbol NA -v NA -d NA -m NA -r "NA" -p 'NA' -u NA -z /home/pgdac/src

# update path to input_ds
input_ds_proc=`cat fn.out`

# run ssgsea/ptm-sea
# don't use curly brackets for $input_ds_proc!
/home/pgdac/ssgsea-cli.R -i $input_ds_proc -y /cromwell-executions/panoply_mo_nmf_workflow/7ffd6c3a-2c3c-4642-b2c4-eeee47c0a80d/call-panoply_ssgsea/inputs/1861426665/pdac-v0.2-param.yaml -d /cromwell-executions/panoply_mo_nmf_workflow/7ffd6c3a-2c3c-4642-b2c4-eeee47c0a80d/call-panoply_ssgsea/inputs/1861426665/h.all.v7.0.symbols.gmt -o test -n NA -w 1.0 -c NA -t NA -s NA -p NA -m NA -g NA

# archive result files
result_regexpr="^signature_gct/.*.gct$|^test.*.gct$|^.*.log.txt$|^.*parameters.txt$"
result_regexpr="$result_regexpr|^$input_ds_proc"

#find * -regextype posix-extended -regex "^signature_gct/.*.gct$|^test.*.gct$|^.*.log.txt$|^.*parameters.txt$" -print0 | tar -czvf test.tar.gz --null -T -
find * -regextype posix-extended -regex $result_regexpr -print0 | tar -czvf test.tar.gz --null -T -`
2020-08-15 16:11:47,670 INFO  - BackgroundConfigAsyncJobExecutionActor [UUID(7ffd6c3a)panoply_mo_nmf_workflow.panoply_ssgsea:NA:1]: executing: # make sure there is no preexisting Docker CID file
rm -f /media/sf_Dropbox/Devel/PANOPLY/hydrant/tasks/panoply_mo_nmf/cromwell-executions/panoply_mo_nmf_workflow/7ffd6c3a-2c3c-4642-b2c4-eeee47c0a80d/call-panoply_ssgsea/execution/docker_cid
# run as in the original configuration without --rm flag (will remove later)
docker run \
  --cidfile /media/sf_Dropbox/Devel/PANOPLY/hydrant/tasks/panoply_mo_nmf/cromwell-executions/panoply_mo_nmf_workflow/7ffd6c3a-2c3c-4642-b2c4-eeee47c0a80d/call-panoply_ssgsea/execution/docker_cid \
  -i \
   \
  --entrypoint /bin/bash \
  -v /media/sf_Dropbox/Devel/PANOPLY/hydrant/tasks/panoply_mo_nmf/cromwell-executions/panoply_mo_nmf_workflow/7ffd6c3a-2c3c-4642-b2c4-eeee47c0a80d/call-panoply_ssgsea:/cromwell-executions/panoply_mo_nmf_workflow/7ffd6c3a-2c3c-4642-b2c4-eeee47c0a80d/call-panoply_ssgsea \
  broadcptacdev/panoply_ssgsea@sha256:4c4f2db950f241b3c12730fc0aefcec0454b519b93af422acaab37b8a1f4483f /cromwell-executions/panoply_mo_nmf_workflow/7ffd6c3a-2c3c-4642-b2c4-eeee47c0a80d/call-panoply_ssgsea/execution/script

# get the return code (working even if the container was detached)
rc=$(docker wait `cat /media/sf_Dropbox/Devel/PANOPLY/hydrant/tasks/panoply_mo_nmf/cromwell-executions/panoply_mo_nmf_workflow/7ffd6c3a-2c3c-4642-b2c4-eeee47c0a80d/call-panoply_ssgsea/execution/docker_cid`)

# remove the container after waiting
docker rm `cat /media/sf_Dropbox/Devel/PANOPLY/hydrant/tasks/panoply_mo_nmf/cromwell-executions/panoply_mo_nmf_workflow/7ffd6c3a-2c3c-4642-b2c4-eeee47c0a80d/call-panoply_ssgsea/execution/docker_cid`

# return exit code
exit $rc
2020-08-15 16:11:49,118 INFO  - BackgroundConfigAsyncJobExecutionActor [UUID(7ffd6c3a)panoply_mo_nmf_workflow.panoply_ssgsea:NA:1]: job id: 17954
2020-08-15 16:11:49,124 INFO  - BackgroundConfigAsyncJobExecutionActor [UUID(7ffd6c3a)panoply_mo_nmf_workflow.panoply_ssgsea:NA:1]: Status change from - to WaitingForReturnCodeFile
2020-08-15 16:12:34,583 INFO  - BackgroundConfigAsyncJobExecutionActor [UUID(7ffd6c3a)panoply_mo_nmf_workflow.panoply_ssgsea:NA:1]: Status change from WaitingForReturnCodeFile to Done
2020-08-15 16:12:35,874 INFO  - WorkflowExecutionActor-7ffd6c3a-2c3c-4642-b2c4-eeee47c0a80d [UUID(7ffd6c3a)]: Starting panoply_mo_nmf_workflow.panoply_ssgsea_report
2020-08-15 16:12:37,015 WARN  - BackgroundConfigAsyncJobExecutionActor [UUID(7ffd6c3a)panoply_mo_nmf_workflow.panoply_ssgsea_report:NA:1]: Unrecognized runtime attribute keys: disks, cpu, memory
2020-08-15 16:12:37,076 INFO  - BackgroundConfigAsyncJobExecutionActor [UUID(7ffd6c3a)panoply_mo_nmf_workflow.panoply_ssgsea_report:NA:1]: `set -euo pipefail
Rscript /home/pgdac/src/rmd-ssgsea.R -t /cromwell-executions/panoply_mo_nmf_workflow/7ffd6c3a-2c3c-4642-b2c4-eeee47c0a80d/call-panoply_ssgsea_report/inputs/-1535363356/test.tar.gz -l test -y /cromwell-executions/panoply_mo_nmf_workflow/7ffd6c3a-2c3c-4642-b2c4-eeee47c0a80d/call-panoply_ssgsea_report/inputs/1861426665/pdac-v0.2-param.yaml -z /home/pgdac/src/`
2020-08-15 16:12:37,086 INFO  - BackgroundConfigAsyncJobExecutionActor [UUID(7ffd6c3a)panoply_mo_nmf_workflow.panoply_ssgsea_report:NA:1]: executing: # make sure there is no preexisting Docker CID file
rm -f /media/sf_Dropbox/Devel/PANOPLY/hydrant/tasks/panoply_mo_nmf/cromwell-executions/panoply_mo_nmf_workflow/7ffd6c3a-2c3c-4642-b2c4-eeee47c0a80d/call-panoply_ssgsea_report/execution/docker_cid
# run as in the original configuration without --rm flag (will remove later)
docker run \
  --cidfile /media/sf_Dropbox/Devel/PANOPLY/hydrant/tasks/panoply_mo_nmf/cromwell-executions/panoply_mo_nmf_workflow/7ffd6c3a-2c3c-4642-b2c4-eeee47c0a80d/call-panoply_ssgsea_report/execution/docker_cid \
  -i \
   \
  --entrypoint /bin/bash \
  -v /media/sf_Dropbox/Devel/PANOPLY/hydrant/tasks/panoply_mo_nmf/cromwell-executions/panoply_mo_nmf_workflow/7ffd6c3a-2c3c-4642-b2c4-eeee47c0a80d/call-panoply_ssgsea_report:/cromwell-executions/panoply_mo_nmf_workflow/7ffd6c3a-2c3c-4642-b2c4-eeee47c0a80d/call-panoply_ssgsea_report \
  broadcptacdev/panoply_ssgsea_report@sha256:9d25134eb0fae087b02b39aa2866b97eeaeaa942c354c755c9ffd4f914950a6b /cromwell-executions/panoply_mo_nmf_workflow/7ffd6c3a-2c3c-4642-b2c4-eeee47c0a80d/call-panoply_ssgsea_report/execution/script

# get the return code (working even if the container was detached)
rc=$(docker wait `cat /media/sf_Dropbox/Devel/PANOPLY/hydrant/tasks/panoply_mo_nmf/cromwell-executions/panoply_mo_nmf_workflow/7ffd6c3a-2c3c-4642-b2c4-eeee47c0a80d/call-panoply_ssgsea_report/execution/docker_cid`)

# remove the container after waiting
docker rm `cat /media/sf_Dropbox/Devel/PANOPLY/hydrant/tasks/panoply_mo_nmf/cromwell-executions/panoply_mo_nmf_workflow/7ffd6c3a-2c3c-4642-b2c4-eeee47c0a80d/call-panoply_ssgsea_report/execution/docker_cid`

# return exit code
exit $rc
2020-08-15 16:12:39,079 INFO  - BackgroundConfigAsyncJobExecutionActor [UUID(7ffd6c3a)panoply_mo_nmf_workflow.panoply_ssgsea_report:NA:1]: job id: 18270
2020-08-15 16:12:39,085 INFO  - BackgroundConfigAsyncJobExecutionActor [UUID(7ffd6c3a)panoply_mo_nmf_workflow.panoply_ssgsea_report:NA:1]: Status change from - to WaitingForReturnCodeFile
2020-08-15 16:12:57,864 INFO  - BackgroundConfigAsyncJobExecutionActor [UUID(7ffd6c3a)panoply_mo_nmf_workflow.panoply_ssgsea_report:NA:1]: Status change from WaitingForReturnCodeFile to Done
2020-08-15 16:12:59,348 INFO  - WorkflowExecutionActor-7ffd6c3a-2c3c-4642-b2c4-eeee47c0a80d [UUID(7ffd6c3a)]: Workflow panoply_mo_nmf_workflow complete. Final Outputs:
{
  "panoply_mo_nmf_workflow.nmf_clust": "/media/sf_Dropbox/Devel/PANOPLY/hydrant/tasks/panoply_mo_nmf/cromwell-executions/panoply_mo_nmf_workflow/7ffd6c3a-2c3c-4642-b2c4-eeee47c0a80d/call-panoply_mo_nmf/execution/results_nmf.tar",
  "panoply_mo_nmf_workflow.nmf_ssgsea": "/media/sf_Dropbox/Devel/PANOPLY/hydrant/tasks/panoply_mo_nmf/cromwell-executions/panoply_mo_nmf_workflow/7ffd6c3a-2c3c-4642-b2c4-eeee47c0a80d/call-panoply_ssgsea/execution/test.tar.gz",
  "panoply_mo_nmf_workflow.nmf_ssgsea_report": "/media/sf_Dropbox/Devel/PANOPLY/hydrant/tasks/panoply_mo_nmf/cromwell-executions/panoply_mo_nmf_workflow/7ffd6c3a-2c3c-4642-b2c4-eeee47c0a80d/call-panoply_ssgsea_report/execution/report_test.html"
}
2020-08-15 16:12:59,769 INFO  - $a [UUID(7ffd6c3a)]: Copying workflow logs from /media/sf_Dropbox/Devel/PANOPLY/hydrant/tasks/panoply_mo_nmf/cromwell-workflow-logs/workflow.7ffd6c3a-2c3c-4642-b2c4-eeee47c0a80d.log to running/wf_logs/workflow.7ffd6c3a-2c3c-4642-b2c4-eeee47c0a80d.log
